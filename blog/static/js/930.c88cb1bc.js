"use strict";(self["webpackChunkblog"]=self["webpackChunkblog"]||[]).push([[930],{3317:function(t,a,e){e.d(a,{Z:function(){return o}});var i=function(){var t=this,a=t._self._c;return t.article?a("div",{staticClass:"card-wrap",staticStyle:{"border-bottom":"2px solid #eee"}},[a("router-link",{staticClass:"box",attrs:{to:`/home/article/${t.article._id}`}},[a("div",{staticClass:"box-content"},[a("h2",{staticStyle:{"font-size":"2em"}},[t._v(t._s(t.article.title))]),a("p",[t._v(t._s(t.article.introduction))]),a("div",{staticClass:"infos animate__animated animate__zoomIn"},[a("div",{staticClass:"date"},[a("i",{staticClass:"gg-calendar-dates"}),a("span",[t._v(" "+t._s(t.article.date)+" ")])]),a("div",{staticClass:"tags"},[a("i",{staticClass:"gg-tag"}),t.article.tags.length?a("span",t._l(t.article.tags,(function(e,i){return a("span",{key:i,staticStyle:{margin:"0 2px",padding:"0 3px"}},[t._v(t._s(e.name))])})),0):a("span",[t._v("undefined")])]),a("div",{staticClass:"comments"},[a("i",{staticClass:"gg-comment"}),a("span",[t._v(" "+t._s(t.article.comment)+" ")])])])]),a("div",{class:{hide:t.hideImage}},[a("img",{staticStyle:{width:"200px"},attrs:{src:t.article.cover}})])])],1):t._e()},s=[],r={name:"ArticleCard",props:{article:Object,hideImage:Boolean},data(){return{}}},n=r,c=e(1001),l=(0,c.Z)(n,i,s,!1,null,"1859fb1b",null),o=l.exports},4930:function(t,a,e){e.r(a),e.d(a,{default:function(){return d}});var i=function(){var t=this,a=t._self._c;return a("div",{ref:"mainBody",staticClass:"container-lg border border-primary paper",staticStyle:{"margin-top":"60px",padding:"10px 20px"}},[t._l(t.articlesInfo.data,(function(e,i){return a("ArticleCard",{key:i,attrs:{article:e,hideImage:t.hideImage}})})),a("p",{staticStyle:{"text-align":"center",cursor:"pointer"},on:{click:t.loadMore}},[t._v(t._s(t.moreTip))])],2)},s=[],r=(e(7658),e(3317)),n={props:["hideImage"],components:{ArticleCard:r.Z},data(){return{articlesInfo:{data:[],total:0,maxPage:1},paging:{pageSize:10,page:1},selectedTags:[],articleDataStack:[]}},computed:{moreTip(t){return this.paging.page>=this.articlesInfo.maxPage?"已加载全部":"加载更多。。。"}},watch:{selectedTags(t,a){if(this.articlesInfo.data=this.articlesInfo.data.filter((a=>t.every((t=>{let e=0;for(;e<a.tags.length;e++)if(a.tags[e]._id===t)return!0;if(e===a.tags.length)return!1})))),t.length<a.length){this.articleDataStack.pop();const t=[...this.articleDataStack[this.articleDataStack.length-1]];this.articlesInfo.data=t}else this.articleDataStack.push([...this.articlesInfo.data])}},methods:{fetchArticles(){this.$http.get("/article/list",{params:{...this.paging}}).then((t=>{const{data:a}=t;if(!a.data)return;const e=a.data.map((t=>(t.link=t._id,t)));this.articlesInfo.data.push(...e),this.articlesInfo.total=a.total,this.articlesInfo.maxPage=a.maxPage,this.articleDataStack.splice(0,1,[...this.articlesInfo.data])}))},loadMore(){this.paging.page>=this.articlesInfo.maxPage||(this.paging.page+=1,this.fetchArticles())}},created(){this.fetchArticles()},mounted(){this.$bus.$on("tagsChanged",(t=>{this.selectedTags=[...t]}))},beforeUpdate(){this.$nextTick((()=>{const t=this.$refs.mainBody,a=window.getComputedStyle(t).height;this.$bus.$emit("on-height-change",a)}))},beforeDestroy(){this.$bus.$off("tagsChanged")}},c=n,l=e(1001),o=(0,l.Z)(c,i,s,!1,null,"46f13702",null),d=o.exports}}]);